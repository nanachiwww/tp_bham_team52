<div>
  <h2>Mindfulness Practices</h2>

  <div class="table-responsive" *ngIf="mindfulnessPractices && mindfulnessPractices.length > 0">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Date</th>
          <th>Activity Type</th>
          <th>Duration</th>
          <th>Note</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let practice of mindfulnessPractices; trackBy: trackId">
          <td>
            <a [routerLink]="['/mindfulness-practice', practice.id, 'view']">{{ practice.id }}</a>
          </td>
          <td>{{ practice.date | formatMediumDate }}</td>
          <td>{{ practice.activityType }}</td>
          <td>{{ practice.duration }} min</td>
          <td>{{ practice.note }}</td>
          <td>
            <!-- Action Buttons -->
            <div class="btn-group">
              <button type="button" [routerLink]="['/mindfulness-practice', practice.id, 'edit']" class="btn btn-primary btn-sm">
                Edit
              </button>
              <button type="button" (click)="delete(practice)" class="btn btn-danger btn-sm">Delete</button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="currentPractice === 'MEDITATION'">
    <h3>Meditation</h3>
    <p>Follow along with this meditation guide.</p>

    <div class="video-wrapper">
      <iframe
        width="560"
        height="315"
        src="https://www.youtube.com/embed/uTN29kj7e-w"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
      ></iframe>
    </div>

    <div>
      <p>Find a comfortable position and close your eyes. Take slow, deep breaths, and focus on relaxing each muscle in your body.</p>
      <p>Continue this for 5-10 minutes, or as long as you feel comfortable.</p>
    </div>

    <div class="timer-container">
      <h3>Set Timer</h3>

      <select [(ngModel)]="selectedDuration" (change)="startTimer()">
        <option *ngFor="let duration of availableDurations" [value]="duration">{{ duration }} minutes</option>
      </select>

      <div class="progress-bar-container">
        <div class="progress-bar" [style.width.%]="progress">{{ countdown }} minutes remaining</div>
      </div>
    </div>
  </div>

  <div *ngIf="currentPractice === 'BREATHING_EXERCISES'">
    <h3>Breathing Exercises</h3>
    <p>Follow this guide for breathing exercises.</p>

    <div class="breathing-container">
      <div class="breathing-circle"></div>
    </div>

    <p>Inhale deeply through your nose when the circle gets bigger.</p>
    <p>Hold your breath for a few seconds, and exhale slowly through your mouth when it shrinks.</p>
    <p>Repeat this process 5-10 times, focusing on your breath.</p>
  </div>
</div>
